<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>제주 여행 플래너</title>
    
    <!-- Tailwind CSS (디자인용) -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Babel (JSX 변환용) -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- React 및 아이콘 라이브러리 불러오기 (Import Map) -->
    <script type="importmap">
    {
        "imports": {
            "react": "https://esm.sh/react@18.2.0",
            "react-dom/client": "https://esm.sh/react-dom@18.2.0/client",
            "lucide-react": "https://esm.sh/lucide-react@0.263.1"
        }
    }
    </script>
</head>
<body>
    <div id="root"></div>

    <!-- 메인 스크립트 -->
    <script type="text/babel" data-type="module">
        import React, { useState, useEffect, useMemo } from 'react';
        import { createRoot } from 'react-dom/client';
        import { Plus, Edit2, Trash2, MapPin, Clock, Check, X, Settings, Search, Calendar, ChevronRight, StickyNote, AlertTriangle } from 'lucide-react';

        // --- Styles & Fonts Injection ---
        const FontStyles = () => (
          <style>{`
            @import url("https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.8/dist/web/static/pretendard.css");
            @import url("https://cdn.jsdelivr.net/gh/sun-typeface/suit/fonts/static/woff2/SUIT.css");
            @import url('https://fonts.googleapis.com/css2?family=Do+Hyeon&display=swap');

            body {
              background-color: #f2f4f6;
            }

            .font-pretendard { font-family: 'Pretendard', sans-serif; }
            .font-suit { font-family: 'SUIT', sans-serif; }
            .font-baemin { font-family: 'Do Hyeon', sans-serif; }
            
            .no-scrollbar::-webkit-scrollbar {
              display: none;
            }
            .no-scrollbar {
              -ms-overflow-style: none;
              scrollbar-width: none;
            }
            
            .glass-effect {
              background: rgba(255, 255, 255, 0.9);
              backdrop-filter: blur(10px);
            }
          `}</style>
        );

        // --- Theme Config ---
        const themeConfig = {
          blue: { 
            name: '오션 블루',
            primary: 'bg-blue-500', 
            hover: 'hover:bg-blue-600',
            light: 'bg-blue-50', 
            text: 'text-blue-600', 
            border: 'border-blue-100',
            ring: 'focus:ring-blue-500',
            shadow: 'shadow-blue-200'
          },
          emerald: { 
            name: '제주 그린',
            primary: 'bg-emerald-500', 
            hover: 'hover:bg-emerald-600',
            light: 'bg-emerald-50', 
            text: 'text-emerald-600', 
            border: 'border-emerald-100',
            ring: 'focus:ring-emerald-500',
            shadow: 'shadow-emerald-200'
          },
          rose: { 
            name: '선셋 핑크',
            primary: 'bg-rose-500', 
            hover: 'hover:bg-rose-600',
            light: 'bg-rose-50', 
            text: 'text-rose-600', 
            border: 'border-rose-100',
            ring: 'focus:ring-rose-500',
            shadow: 'shadow-rose-200'
          },
          violet: { 
            name: '미드나잇 퍼플',
            primary: 'bg-violet-500', 
            hover: 'hover:bg-violet-600',
            light: 'bg-violet-50', 
            text: 'text-violet-600', 
            border: 'border-violet-100',
            ring: 'focus:ring-violet-500',
            shadow: 'shadow-violet-200'
          },
          orange: { 
            name: '감귤 오렌지',
            primary: 'bg-orange-500', 
            hover: 'hover:bg-orange-600',
            light: 'bg-orange-50', 
            text: 'text-orange-600', 
            border: 'border-orange-100',
            ring: 'focus:ring-orange-500',
            shadow: 'shadow-orange-200'
          },
        };

        // --- Component: Input Field ---
        const InputField = ({ label, value, onChange, type = "text", placeholder, theme }) => (
          <div className="mb-4 w-full">
            <label className="block text-sm font-medium text-gray-500 mb-1 ml-1">{label}</label>
            <input
              type={type}
              value={value}
              onChange={onChange}
              placeholder={placeholder}
              className={`w-full bg-gray-50 border border-gray-100 rounded-2xl px-4 py-3 text-gray-900 focus:outline-none focus:ring-2 ${themeConfig[theme].ring}/50 focus:border-transparent transition-all`}
            />
          </div>
        );

        // --- Component: Text Area ---
        const TextAreaField = ({ label, value, onChange, placeholder, theme }) => (
          <div className="mb-4 w-full">
            <label className="block text-sm font-medium text-gray-500 mb-1 ml-1">{label}</label>
            <textarea
              value={value}
              onChange={onChange}
              placeholder={placeholder}
              rows={3}
              className={`w-full bg-gray-50 border border-gray-100 rounded-2xl px-4 py-3 text-gray-900 focus:outline-none focus:ring-2 ${themeConfig[theme].ring}/50 focus:border-transparent transition-all resize-none`}
            />
          </div>
        );

        // --- Component: Modal ---
        const Modal = ({ isOpen, onClose, title, children }) => {
          if (!isOpen) return null;
          return (
            <div className="fixed inset-0 z-50 flex items-center justify-center p-4">
              <div className="absolute inset-0 bg-black/30 backdrop-blur-sm transition-opacity" onClick={onClose} />
              <div className="relative bg-white w-full max-w-md rounded-3xl shadow-2xl p-6 transform transition-all scale-100 max-h-[90vh] overflow-y-auto no-scrollbar">
                <div className="flex justify-between items-center mb-6 sticky top-0 bg-white z-10 py-2">
                  <h2 className="text-xl font-bold text-gray-800">{title}</h2>
                  <button onClick={onClose} className="p-2 bg-gray-100 rounded-full hover:bg-gray-200 transition-colors">
                    <X size={20} className="text-gray-600" />
                  </button>
                </div>
                {children}
              </div>
            </div>
          );
        };

        // --- Storage Helper ---
        const useStickyState = (defaultValue, key) => {
          const [value, setValue] = useState(() => {
            const stickyValue = window.localStorage.getItem(key);
            return stickyValue !== null ? JSON.parse(stickyValue) : defaultValue;
          });
          
          useEffect(() => {
            window.localStorage.setItem(key, JSON.stringify(value));
          }, [key, value]);
          
          return [value, setValue];
        };

        // --- Main Application ---
        function TravelPlanner() {
          // --- States with Persistence ---
          const [tripInfo, setTripInfo] = useStickyState({
            title: '제주 여행',
            startDate: '2025-08-29',
            endDate: '2025-09-02'
          }, 'planner-trip-info');

          const [items, setItems] = useStickyState([
            { id: 1, date: '2025-08-29', time: '10:00', title: '인천공항 도착', location: '인천공항 제2여객터미널', category: '이동', memo: '여권, 보조배터리 챙기기' },
            { id: 2, date: '2025-08-29', time: '13:30', title: '호텔 체크인', location: '그랜드 조선 제주', category: '숙소', memo: '얼리 체크인 요청해둠' },
            { id: 3, date: '2025-08-29', time: '15:00', title: '해변 산책 & 카페', location: '협재 해수욕장', category: '활동', memo: '' },
            { id: 4, date: '2025-08-30', time: '09:00', title: '우도 배 타기', location: '성산포항', category: '활동', memo: '신분증 필수 지참' },
          ], 'planner-items');
          
          const [activeFont, setActiveFont] = useStickyState('pretendard', 'planner-font');
          const [theme, setTheme] = useStickyState('blue', 'planner-theme');
          
          // Local State
          const [selectedDate, setSelectedDate] = useState('ALL'); 
          
          // Modal States
          const [isItemModalOpen, setIsItemModalOpen] = useState(false);
          const [isTripModalOpen, setIsTripModalOpen] = useState(false);
          const [isSettingsOpen, setIsSettingsOpen] = useState(false);
          
          // Confirm Modal States
          const [isDeleteModalOpen, setIsDeleteModalOpen] = useState(false);
          const [itemToDelete, setItemToDelete] = useState(null);
          
          const [isResetModalOpen, setIsResetModalOpen] = useState(false);
          
          const [editingItem, setEditingItem] = useState(null);
          const [itemFormData, setItemFormData] = useState({ date: '', time: '', title: '', location: '', category: '활동', memo: '' });
          const [tripFormData, setTripFormData] = useState({ ...tripInfo });

          // Options
          const fontOptions = [
            { id: 'pretendard', name: '기본 (Pretendard)', class: 'font-pretendard' },
            { id: 'suit', name: 'SUIT', class: 'font-suit' },
            { id: 'baemin', name: '배민 (도현)', class: 'font-baemin' },
          ];

          const currentTheme = themeConfig[theme];

          // --- Logic for Dates ---
          const getDaysArray = (start, end) => {
            const arr = [];
            const dt = new Date(start);
            const endDt = new Date(end);
            
            if (isNaN(dt) || isNaN(endDt)) return [];

            while (dt <= endDt) {
              arr.push(new Date(dt).toISOString().split('T')[0]);
              dt.setDate(dt.getDate() + 1);
            }
            return arr;
          };

          const tripDays = useMemo(() => getDaysArray(tripInfo.startDate, tripInfo.endDate), [tripInfo]);

          // --- Handlers ---
          const handleOpenTripEdit = () => {
            setTripFormData({ ...tripInfo });
            setIsTripModalOpen(true);
          };

          const addDays = (dateStr, days) => {
            const result = new Date(dateStr);
            result.setDate(result.getDate() + days);
            return result.toISOString().split('T')[0];
          };

          const handleTripSubmit = () => {
            if (!tripFormData.title) return alert('여행 제목을 입력해주세요.');

            const oldStart = new Date(tripInfo.startDate);
            const newStart = new Date(tripFormData.startDate);
            
            // Check if start date changed
            if (oldStart.getTime() !== newStart.getTime()) {
              const diffTime = newStart - oldStart;
              const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));

              if (diffDays !== 0) {
                 const newItems = items.map(item => ({
                  ...item,
                  date: addDays(item.date, diffDays)
                }));
                setItems(newItems);
              }
            }

            setTripInfo(tripFormData);
            if (selectedDate !== 'ALL') {
              setSelectedDate('ALL');
            }
            setIsTripModalOpen(false);
          };

          const handleOpenAdd = () => {
            setEditingItem(null);
            let initialDate = tripInfo.startDate;
            if (selectedDate !== 'ALL' && tripDays.includes(selectedDate)) {
              initialDate = selectedDate;
            }
            setItemFormData({ date: initialDate, time: '', title: '', location: '', category: '활동', memo: '' });
            setIsItemModalOpen(true);
          };

          const handleOpenEdit = (item) => {
            setEditingItem(item);
            setItemFormData({ ...item });
            setIsItemModalOpen(true);
          };

          const onClickDelete = (id) => {
            setItemToDelete(id);
            setIsDeleteModalOpen(true);
          };

          const confirmDelete = () => {
            if (itemToDelete) {
              setItems(prev => prev.filter(item => item.id !== itemToDelete));
              setItemToDelete(null);
              setIsDeleteModalOpen(false);
            }
          };

          const handleItemSubmit = () => {
            if (!itemFormData.date || !itemFormData.time || !itemFormData.title) {
              alert('날짜, 시간, 일정 이름은 꼭 입력해주세요.');
              return;
            }

            if (editingItem) {
              setItems(prev => prev.map(item => item.id === editingItem.id ? { ...itemFormData, id: item.id } : item));
            } else {
              setItems(prev => [...prev, { ...itemFormData, id: Date.now() }]);
            }
            setIsItemModalOpen(false);
          };

          const openGoogleMapsSearch = (query) => {
            if (!query) return alert('장소를 입력한 후 검색해주세요.');
            const url = `https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(query)}`;
            window.open(url, '_blank');
          };

          const onClickReset = () => {
            setIsResetModalOpen(true);
          };

          const confirmReset = () => {
            localStorage.removeItem('planner-trip-info');
            localStorage.removeItem('planner-items');
            localStorage.removeItem('planner-font');
            localStorage.removeItem('planner-theme');
            location.reload();
          };

          // Filter and Sort
          const filteredItems = items.filter(item => {
            const isDateMatch = selectedDate === 'ALL' || item.date === selectedDate;
            const isWithinRange = tripDays.includes(item.date); // Hide out-of-range items
            return isDateMatch && isWithinRange;
          });

          const sortedItems = [...filteredItems].sort((a, b) => {
            if (a.date !== b.date) return a.date.localeCompare(b.date);
            return a.time.localeCompare(b.time);
          });

          // Display Helper
          const formatDateRange = (start, end) => {
            const s = new Date(start);
            const e = new Date(end);
            const format = (d) => `${d.getFullYear()}.${String(d.getMonth()+1).padStart(2,'0')}.${String(d.getDate()).padStart(2,'0')}`;
            return `${format(s)} - ${format(e)}`;
          };

          const getDayLabel = (dateStr) => {
            const idx = tripDays.indexOf(dateStr);
            if (idx === -1) return ''; 
            return `Day ${idx + 1}`;
          };

          return (
            <div className={`min-h-screen pb-24 ${fontOptions.find(f => f.id === activeFont)?.class}`}>
              <FontStyles />

              {/* Header */}
              <header className="sticky top-0 z-40 glass-effect border-b border-gray-100 transition-all">
                <div className="max-w-md mx-auto px-5 py-4 flex justify-between items-center">
                  <div 
                    onClick={handleOpenTripEdit} 
                    className="cursor-pointer hover:opacity-70 transition-opacity p-2 -ml-2 rounded-xl hover:bg-gray-50 group"
                  >
                    <div className={`flex items-center text-sm ${currentTheme.text} font-bold mb-0.5`}>
                      <Calendar size={14} className="mr-1" />
                      {formatDateRange(tripInfo.startDate, tripInfo.endDate)}
                    </div>
                    <div className="flex items-center gap-2">
                      <h1 className="text-2xl font-extrabold text-gray-900">{tripInfo.title}</h1>
                      <Edit2 size={18} className="text-gray-300 group-hover:text-gray-500 transition-colors" />
                    </div>
                  </div>
                  
                  {/* Settings Menu */}
                  <div className="relative">
                    <button 
                      onClick={() => setIsSettingsOpen(!isSettingsOpen)}
                      className="p-2.5 bg-white border border-gray-100 rounded-full shadow-sm hover:bg-gray-50 transition-all text-gray-600"
                    >
                      <Settings size={20} />
                    </button>
                    
                    {isSettingsOpen && (
                      <>
                        <div className="fixed inset-0 z-10" onClick={() => setIsSettingsOpen(false)} />
                        <div className="absolute right-0 top-full mt-2 w-64 bg-white rounded-2xl shadow-xl border border-gray-100 overflow-hidden z-20 p-4 animate-in fade-in slide-in-from-top-2">
                          <p className="text-xs font-bold text-gray-400 mb-3 ml-1">폰트 설정</p>
                          <div className="space-y-1 mb-5">
                            {fontOptions.map(font => (
                              <button
                                key={font.id}
                                onClick={() => setActiveFont(font.id)}
                                className={`w-full text-left px-3 py-2 text-sm rounded-lg transition-colors ${activeFont === font.id ? `${currentTheme.light} ${currentTheme.text} font-bold` : 'text-gray-600 hover:bg-gray-50'}`}
                              >
                                {font.name}
                              </button>
                            ))}
                          </div>

                          <p className="text-xs font-bold text-gray-400 mb-3 ml-1">테마 컬러</p>
                          <div className="grid grid-cols-5 gap-2 mb-5">
                            {Object.entries(themeConfig).map(([key, config]) => (
                              <button
                                key={key}
                                onClick={() => setTheme(key)}
                                className={`w-8 h-8 rounded-full ${config.primary} ring-2 ring-offset-2 transition-all ${theme === key ? 'ring-gray-300 scale-110' : 'ring-transparent hover:scale-110'}`}
                                title={config.name}
                              />
                            ))}
                          </div>

                          <div className="border-t border-gray-100 pt-3">
                              <button 
                                onClick={onClickReset}
                                className="w-full text-left px-2 py-2 text-xs text-red-400 hover:text-red-600 transition-colors"
                              >
                                  모든 데이터 초기화
                              </button>
                          </div>
                        </div>
                      </>
                    )}
                  </div>
                </div>

                {/* Day Selector */}
                <div className="max-w-md mx-auto px-5 pb-2 overflow-x-auto no-scrollbar flex space-x-2">
                   <button
                     onClick={() => setSelectedDate('ALL')}
                     className={`flex-shrink-0 px-4 py-2 rounded-full text-sm font-bold transition-all ${selectedDate === 'ALL' ? `${currentTheme.primary} text-white shadow-md` : 'bg-white text-gray-500 border border-gray-100'}`}
                   >
                     전체
                   </button>
                   {tripDays.map((date, idx) => (
                     <button
                       key={date}
                       onClick={() => setSelectedDate(date)}
                       className={`flex-shrink-0 px-4 py-2 rounded-full text-sm font-bold transition-all ${selectedDate === date ? `${currentTheme.primary} text-white shadow-md` : 'bg-white text-gray-500 border border-gray-100'}`}
                     >
                       Day {idx + 1}
                     </button>
                   ))}
                </div>
              </header>

              {/* Main Content */}
              <main className="max-w-md mx-auto px-5 py-6">
                {/* Timeline */}
                <div className="relative">
                  {/* Vertical Line */}
                  <div className="absolute left-4 top-4 bottom-4 w-0.5 bg-gray-200 rounded-full"></div>

                  <div className="space-y-8">
                    {sortedItems.length > 0 ? (
                      sortedItems.map((item, index) => {
                        const showDayHeader = index === 0 || item.date !== sortedItems[index-1].date;
                        return (
                          <div key={item.id}>
                            {/* Date Header in List */}
                            {showDayHeader && selectedDate === 'ALL' && (
                              <div className="pl-12 mb-4">
                                <span className={`inline-block px-3 py-1 rounded-lg ${currentTheme.light} ${currentTheme.text} text-xs font-extrabold`}>
                                  {getDayLabel(item.date)} • {item.date}
                                </span>
                              </div>
                            )}
                            
                            <div className="relative pl-12 group">
                              {/* Dot */}
                              <div className={`absolute left-[9px] top-6 w-3.5 h-3.5 bg-white border-4 ${currentTheme.border.replace('border', 'border')} rounded-full z-10 box-content`} style={{ borderColor: 'currentColor', color: 'inherit' }}>
                                <div className={`w-full h-full rounded-full ${currentTheme.primary}`}></div>
                              </div>

                              {/* Card */}
                              <div className={`bg-white p-5 rounded-3xl shadow-[0_2px_20px_rgba(0,0,0,0.04)] border border-gray-50 transition-transform active:scale-[0.98]`}>
                                <div className="flex justify-between items-start mb-2">
                                  <span className="inline-flex items-center px-2.5 py-1 rounded-lg bg-gray-100 text-xs font-bold text-gray-600">
                                    <Clock size={12} className="mr-1" />
                                    {item.time}
                                  </span>
                                  <div className="flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity">
                                    <button 
                                      onClick={() => handleOpenEdit(item)} 
                                      className={`p-1.5 ${currentTheme.light} ${currentTheme.text} rounded-lg hover:opacity-80`}
                                    >
                                      <Edit2 size={14} />
                                    </button>
                                    <button 
                                      onClick={() => onClickDelete(item.id)} 
                                      className="p-1.5 bg-red-50 text-red-600 rounded-lg hover:bg-red-100"
                                    >
                                      <Trash2 size={14} />
                                    </button>
                                  </div>
                                </div>
                                
                                <h3 className="text-lg font-bold text-gray-900 mb-1">{item.title}</h3>
                                
                                <button 
                                  onClick={() => openGoogleMapsSearch(item.location)}
                                  className={`flex items-center text-gray-500 text-sm hover:${currentTheme.text} hover:underline transition-colors text-left mb-2`}
                                >
                                  <MapPin size={14} className="mr-1 flex-shrink-0" />
                                  <span className="truncate">{item.location || '장소 미정'}</span>
                                  <ChevronRight size={12} className="ml-1 opacity-50" />
                                </button>

                                {/* Memo Section */}
                                {item.memo && (
                                  <div className="mt-3 pt-3 border-t border-dashed border-gray-100 flex items-start text-xs text-gray-500 bg-gray-50/50 p-2 rounded-xl">
                                    <StickyNote size={12} className={`mr-1.5 mt-0.5 ${currentTheme.text} flex-shrink-0`} />
                                    <span className="leading-relaxed">{item.memo}</span>
                                  </div>
                                )}
                              </div>
                            </div>
                          </div>
                        );
                      })
                    ) : (
                      <div className="text-center py-20 text-gray-400">
                        <p>
                          {selectedDate === 'ALL' 
                            ? '여행 기간 내에 등록된 일정이 없어요.' 
                            : '이 날은 아직 일정이 없어요.'}
                        </p>
                        <button onClick={handleOpenAdd} className={`mt-4 ${currentTheme.text} font-bold`}>일정 추가하기</button>
                      </div>
                    )}
                  </div>
                </div>
              </main>

              {/* Floating Action Button */}
              <div className="fixed bottom-6 right-6 z-30 max-w-md w-full mx-auto px-5 pointer-events-none">
                <div className="max-w-md mx-auto relative pointer-events-auto text-right">
                  <button
                    onClick={handleOpenAdd}
                    className={`bg-gray-900 hover:bg-gray-800 text-white p-4 rounded-full shadow-xl transition-all hover:scale-105 active:scale-95 flex items-center justify-center ml-auto ${currentTheme.shadow}`}
                  >
                    <Plus size={28} />
                  </button>
                </div>
              </div>

              {/* 1. Item Add/Edit Modal */}
              <Modal
                isOpen={isItemModalOpen}
                onClose={() => setIsItemModalOpen(false)}
                title={editingItem ? "일정 수정하기" : "새로운 일정"}
              >
                <div className="space-y-1">
                  <div className="grid grid-cols-2 gap-3 mb-1">
                    <div className="mb-4 w-full">
                        <label className="block text-sm font-medium text-gray-500 mb-1 ml-1">날짜</label>
                        <select
                            value={itemFormData.date}
                            onChange={(e) => setItemFormData({ ...itemFormData, date: e.target.value })}
                            className={`w-full bg-gray-50 border border-gray-100 rounded-2xl px-4 py-3 text-gray-900 focus:outline-none focus:ring-2 ${currentTheme.ring}/50 focus:border-transparent transition-all appearance-none`}
                        >
                            {tripDays.map((date, idx) => (
                                <option key={date} value={date}>Day {idx+1} ({date.slice(5)})</option>
                            ))}
                            {!tripDays.includes(itemFormData.date) && itemFormData.date && (
                                <option value={itemFormData.date}>{itemFormData.date}</option>
                            )}
                        </select>
                    </div>
                    <InputField
                        label="시간"
                        type="time"
                        value={itemFormData.time}
                        onChange={(e) => setItemFormData({ ...itemFormData, time: e.target.value })}
                        theme={theme}
                    />
                  </div>

                  <InputField
                    label="무엇을 하나요?"
                    placeholder="예: 맛집 탐방, 체크인"
                    value={itemFormData.title}
                    onChange={(e) => setItemFormData({ ...itemFormData, title: e.target.value })}
                    theme={theme}
                  />
                  
                  <div className="mb-4">
                     <label className="block text-sm font-medium text-gray-500 mb-1 ml-1">장소</label>
                     <div className="flex gap-2">
                        <input
                          type="text"
                          value={itemFormData.location}
                          onChange={(e) => setItemFormData({ ...itemFormData, location: e.target.value })}
                          placeholder="어디서 하나요?"
                          className={`flex-1 bg-gray-50 border border-gray-100 rounded-2xl px-4 py-3 text-gray-900 focus:outline-none focus:ring-2 ${currentTheme.ring}/50 focus:border-transparent transition-all`}
                        />
                        <button 
                          onClick={() => openGoogleMapsSearch(itemFormData.location)}
                          className={`${currentTheme.light} ${currentTheme.text} px-4 rounded-2xl font-bold text-sm whitespace-nowrap hover:opacity-80 transition-colors`}
                        >
                          <Search size={18} />
                        </button>
                     </div>
                  </div>

                  <TextAreaField 
                    label="메모 (선택)"
                    placeholder="준비물, 예약번호, 링크 등을 적어두세요."
                    value={itemFormData.memo}
                    onChange={(e) => setItemFormData({ ...itemFormData, memo: e.target.value })}
                    theme={theme}
                  />
                  
                  <div className="pt-2">
                    <button
                      onClick={handleItemSubmit}
                      className={`w-full ${currentTheme.primary} text-white font-bold py-4 rounded-2xl shadow-lg ${currentTheme.shadow} active:scale-[0.98] transition-all ${currentTheme.hover}`}
                    >
                      {editingItem ? '수정 완료' : '일정 추가하기'}
                    </button>
                  </div>
                </div>
              </Modal>

              {/* 2. Trip Info Edit Modal */}
              <Modal
                isOpen={isTripModalOpen}
                onClose={() => setIsTripModalOpen(false)}
                title="여행 정보 수정"
              >
                <div className="space-y-1">
                  <InputField
                    label="여행 제목"
                    placeholder="예: 제주 여행, 유럽 배낭여행"
                    value={tripFormData.title}
                    onChange={(e) => setTripFormData({ ...tripFormData, title: e.target.value })}
                    theme={theme}
                  />
                  <div className="grid grid-cols-2 gap-3">
                     <InputField
                      label="시작일"
                      type="date"
                      value={tripFormData.startDate}
                      onChange={(e) => setTripFormData({ ...tripFormData, startDate: e.target.value })}
                      theme={theme}
                    />
                     <InputField
                      label="종료일"
                      type="date"
                      value={tripFormData.endDate}
                      onChange={(e) => setTripFormData({ ...tripFormData, endDate: e.target.value })}
                      theme={theme}
                    />
                  </div>
                  
                  <div className="pt-4">
                    <button
                      onClick={handleTripSubmit}
                      className="w-full bg-gray-900 text-white font-bold py-4 rounded-2xl shadow-lg active:scale-[0.98] transition-all hover:bg-gray-800"
                    >
                      저장하기
                    </button>
                  </div>
                </div>
              </Modal>

              {/* 3. Delete Confirmation Modal */}
              <Modal
                isOpen={isDeleteModalOpen}
                onClose={() => setIsDeleteModalOpen(false)}
                title="일정 삭제"
              >
                <div className="text-center py-4">
                  <div className="mx-auto w-12 h-12 bg-red-100 rounded-full flex items-center justify-center mb-4">
                    <Trash2 size={24} className="text-red-600" />
                  </div>
                  <h3 className="text-lg font-bold text-gray-900 mb-2">정말 삭제하시겠어요?</h3>
                  <p className="text-sm text-gray-500 mb-6">삭제한 일정은 복구할 수 없어요.</p>
                  
                  <div className="flex gap-3">
                    <button
                      onClick={() => setIsDeleteModalOpen(false)}
                      className="flex-1 py-3.5 rounded-2xl bg-gray-100 font-bold text-gray-600 hover:bg-gray-200 transition-colors"
                    >
                      취소
                    </button>
                    <button
                      onClick={confirmDelete}
                      className="flex-1 py-3.5 rounded-2xl bg-red-500 font-bold text-white shadow-lg shadow-red-200 hover:bg-red-600 transition-colors"
                    >
                      삭제하기
                    </button>
                  </div>
                </div>
              </Modal>

              {/* 4. Reset Confirmation Modal */}
              <Modal
                isOpen={isResetModalOpen}
                onClose={() => setIsResetModalOpen(false)}
                title="데이터 초기화"
              >
                <div className="text-center py-4">
                  <div className="mx-auto w-12 h-12 bg-orange-100 rounded-full flex items-center justify-center mb-4">
                    <AlertTriangle size={24} className="text-orange-600" />
                  </div>
                  <h3 className="text-lg font-bold text-gray-900 mb-2">모든 데이터를 지울까요?</h3>
                  <p className="text-sm text-gray-500 mb-6">작성한 일정과 설정이 모두 사라지고<br/>처음 상태로 돌아갑니다.</p>
                  
                  <div className="flex gap-3">
                    <button
                      onClick={() => setIsResetModalOpen(false)}
                      className="flex-1 py-3.5 rounded-2xl bg-gray-100 font-bold text-gray-600 hover:bg-gray-200 transition-colors"
                    >
                      취소
                    </button>
                    <button
                      onClick={confirmReset}
                      className="flex-1 py-3.5 rounded-2xl bg-gray-900 font-bold text-white shadow-lg hover:bg-gray-800 transition-colors"
                    >
                      초기화
                    </button>
                  </div>
                </div>
              </Modal>
            </div>
          );
        }

        const root = createRoot(document.getElementById('root'));
        root.render(<TravelPlanner />);
    </script>
</body>
</html>
